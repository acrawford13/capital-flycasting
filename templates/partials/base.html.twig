<!DOCTYPE html>
<html lang="{{ grav.language.getLanguage ?: 'en' }}">
    <head>
        {% if site.googleAnalyticsId %}
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id={{site.googleAnalyticsId}}"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '{{ site.googleAnalyticsId }}');
        </script>
        {% endif %}

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        {% if header.title %}
            {% set pageTitle = header.title|e ~ " | " %}
        {% endif %}
        {% set pageTitle = pageTitle ~ site.title|e %}
        {% if site.subtitle %}
            {% set pageTitle = pageTitle ~ " - " ~ site.subtitle %}
        {% endif %}
        <title>{{ pageTitle }}</title>
        <link rel="canonical" href="{{ page.url(true, true) }}" />
        <!-- Search Engine -->
        <meta name="description" content="{{ page.summary(null, true) }}">
        <meta name="image" content="{{ page.header.pageHeader ? 'http://www.capitalflycasting.com' ~ page.media[page.header.pageHeader].url : '' }}">
        <!-- Schema.org for Google -->
        <meta itemprop="name" content="{{ pageTitle }}">
        <meta itemprop="description" content="{{ page.summary(null, true) }}">
        <meta itemprop="image" content="{{ page.header.pageHeader ? 'http://www.capitalflycasting.com' ~ page.media[page.header.pageHeader].url : '' }}">
        <!-- Twitter -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="{{ pageTitle }}">
        <meta name="twitter:description" content="{{ page.summary(null, true) }}">
        <!-- Open Graph general (Facebook, Pinterest & Google+) -->
        <meta name="og:title" content="{{ header.title ? header.title : site.title }}">
        <meta name="og:description" content="{{ page.summary(null, true) }}">
        <meta name="og:url" content="http://www.capitalflycasting.com">
        <meta name="og:site_name" content="Capital Fly Casting - Canberra, Australia">
        <meta name="og:locale" content="en_AU">
        <meta name="og:type" content="website">

        {% block stylesheets %}
            {% do assets.addCss('theme://css/purecss/pure-min.css', 102) %}
            {% do assets.addCss('theme://css/main.css', 100) %}

            {% if (browser.getBrowser == 'msie' and browser.getVersion > 8) or browser.getBrowser != 'msie' %}
                {% do assets.addCss('theme://css/purecss/grids-responsive-min.css', 101) %}
            {% endif %}
            {% if browser.getBrowser == 'msie' and browser.getVersion <= 8 %}
                {% do assets.addCss('theme://css/purecss/grids-responsive-old-ie-min.css', 101) %}
            {% endif %}
        {% endblock %}
        {{ assets.css() }}

        {% block javascripts %}
            {% do assets.addJs('jquery', 101) %}
        {% endblock %}
        {{ assets.js() }}
    </head>
    <body>
        {% block header %}
            {% include 'partials/header.html.twig' %}
        {% endblock %}
        {% block body %}
        <section id="body" class="content container limited-width">
            {% block content %}{% endblock %}
        </section>
        {% endblock %}
        {% include 'partials/footer.html.twig' %}


        {% block bottom %}
            {{ assets.js('bottom') }}
        {% endblock %}
        <script>
            function openImage(imageElement){
                imageElement.clone().addClass('photo--temp').insertAfter(imageElement.parent());
                imageElement.addClass('photo--clicked');
                imageElement.parent('.photo-container').addClass('photo-container--clicked');
            }

            function closeImage(){
                $('.photo--clicked').removeClass('photo--clicked');
                $('.photo-container--clicked').removeClass('photo-container--clicked');
                $('.photo--temp').remove();
            }

            $(document).on('click', '.gallery__item', function(){
                $('.gallery__modal .modal__image').attr('src', $(this).find('img').attr('data-src'));
            });

            $(document).on('click', '.photo--clickable', function(){
                closeImage();
                openImage($(this));
            });

            $(document).on('click', '.photo-container--clicked', function(){
                closeImage();
            });

            $(document).on('click', '.photo--clicked', function(){
                closeImage();
            });
        </script>
    </body>
</html>
